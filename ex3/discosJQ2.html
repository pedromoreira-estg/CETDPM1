<html>
	<head>
		<title>DISCOTECA</title>
		<style>
			td {
				border: solid black 1px;
				text-align: center;
				width:50%;
			}
			.imagemcapa {
				width:150px;
				height:150px;
			}
			table {
				width:400px;
			}

		</style>
		<script src="../jquery/jquery-1.9.1.min.js"></script>
		
		<script>
	
		$.get("discoteca.xml",mostra_tabela);
		
		function mostra_tabela(documentoXML) {
			//alert(documentoXML);
			
			albuns = $(documentoXML).find("album");
			
			//alert(albuns);
			//$(albuns).each(mostra);
		
			// para cada album -> executamos a seguinte funcao
			$(albuns).each(
				function () {
					// extrai titulo
					//o_titulo_elemento = $(this).find("titulo")[0];
					//o_titulo = $(o_titulo_elemento).text();
					o_titulo = $(this).find("titulo").text();
					
					// extrai genero
					o_genero = $(this).attr("genero");
				
					// extrai artista
					o_artista = $(this).find("artista").text();
					
					// extrai capa
					a_capa = $(this).find("capa").attr("url");
					
					// extrai ano
					o_ano = $(this).find("ano").text();
					
					// cria div
					o_div = $("<div/>");
					$("body").append(o_div);
					
					// cria tabela
					a_tabela = $("<table>");
					o_div.append(a_tabela);
					
					o_tr1  = $("<tr/>");
					a_tabela.append(o_tr1);
					
					o_td11 = $("<td/>");
					o_tr1.append(o_td11);
					o_td11.text(o_artista);

					
					o_td12 = $("<td/>");
					o_tr1.append(o_td12);
					o_td12.text(o_titulo);
					
					o_tr2  = $("<tr/>");
					a_tabela.append(o_tr2);

					
					o_td21 = $("<td/>");
					o_tr2.append(o_td21);
					o_td21.attr("colspan","2");
					
					a_img = $("<img/>");
					o_td21.append(a_img);
					a_img.attr("src",a_capa);
					
					o_tr3  = $("<tr/>");
					a_tabela.append(o_tr3);
					
					o_td31 = $("<td/>");
					o_tr3.append(o_td31);
					o_td31.text(o_ano);
					
					o_td32 = $("<td/>");
					o_tr3.append(o_td32);
					o_td32.text(o_genero);
					
					
										
					//---------------------
					o_tr2.hide();
					o_td11.click(function () {
						$(this).parent().next().fadeToggle(1800);
						});
					//---------------------
				}
			);
		
			
		}
		
		
		function  mostra() {
			alert(this.textContent);
			alert($(this));
		}
	
		</script>
	</head>
	<body>
		<h1>os meus discos</h1>
	</body>
</html>